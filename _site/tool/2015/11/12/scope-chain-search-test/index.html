<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

    <!-- viewport 설정 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- keyword 설정 -->
    <meta name="keywords" content="tool">
    <!-- description 설정 -->
    <meta name="description" content="식별자 검색 테스트" />

    <!-- open graph 설정 -->
    <meta property="og:type" content="mohwa blog">
    <meta property="og:title" content="식별자 검색 테스트">
    <meta property="og:description" content="식별자 검색 테스트">
    <!--<meta property="og:image" content="http://mysite.com/myimage.jpg">-->
    <meta property="og:url" content="/blog">

    <meta name="copyright" content="by mohwa" />

    <!--<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />-->

    <!-- google search console 설정 -->
    <link rel="alternate" hreflang="ko" href="http://mohwa.github.io" />
    <link rel="alternate" hreflang="ko" href="https://mohwa.github.io" />

    <link rel="stylesheet" href="/blog/assets/css/site.css" />
    <link rel="stylesheet" href="/blog/bower_components/highlightjs/styles/darkula.css">

    <script src="/blog/bower_components/jquery/dist/jquery.min.js" type="text/javascript"></script>
    <script src="/blog/bower_components/highlightjs/highlight.pack.min.js" type="text/javascript"></script>
    <script src="/blog/bower_components/purl/purl.js" type="text/javascript"></script>
    <!-- Script pointing to jekyll-search.js -->
    <script src="/blog/bower_components/simple-jekyll-search/dest/jekyll-search.js" type="text/javascript"></script>

    <title>식별자 검색 테스트</title>

    <script type="text/javascript">

        // code highlight 적용
        // https://highlightjs.org/static/demo/
        $(document).ready(function() {
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        });
    </script>
</head>

<body>

  <div class="top-bar"></div>

  <div class="container">
    <div class="site">
      <header>
        <nav>
    <span style="float:left;">
        <a class="" href="/blog/">Home</a>
        <!--<a class="" href="/archive/">전체글</a>-->
        <!--<a class="" href="//github.com/nolboo/nolboo.github.io/wiki">번역글 위키</a>-->
    </span>
    <span style="float:right;">
        <div id="search-container" class="search-container">
            <input type="text" id="search-input" class="search-input" placeholder="search...">
        </div>
    </span>
</nav>

        <div class="pull-right right logo">
          <div class="name"></div>
          <!--<a href="/feed.xml"><img class="avatar" src="/images/rss.jpg" alt="RSS" /></a>-->
        </div>
      </header>
      <div class="separator"></div>
      <ul id="results-container" class="results-container"></ul>
      <article>
  <h1>
    식별자 검색 테스트
  </h1>
  <div class="center">
    <p class="meta">12 Nov 2015</p>
  </div>



  <div class="post">
  <p>현재 정리중인 &quot;<a href="http://www.hanbit.co.kr/book/look.html?isbn=978-89-7914-855-8">JavaScript 성능 최적화</a> 책을 읽고..&quot; 라는 포스트 내용 중 <strong>Scope Chain</strong> 을 통한, <strong>식별자 검색</strong>에 대한 이야기가 나온다.</p>

<p>또, 이 내용을 <strong>검증</strong>하기위한 <strong>테스트 코드</strong>를 아래와 같이 작성해보았다.</p>

<h2 id=">식별자 검색 테스트</h2>

<ul>
<li>(<span style="color:#c11f1f">n</span>) 개의 <strong>전역 변수</strong> 및 <strong>중첩 함수</strong>를 생성하여, <strong>식별자 검색</strong>에 대한 <span style="color:#c11f1f">성능 테스트</span>를 진행할 수 있다.</li>
</ul>

<p><iframe height='350' scrolling='no' src='http://codepen.io/yanione/embed/epbYzm/?height=268&theme-id=0&default-tab=result' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/yanione/pen/epbYzm/'>epbYzm</a> by mohwa (<a href='http://codepen.io/yanione'>@yanione</a>) on <a href='http://codepen.io'>CodePen</a>.
  </iframe></p>

<h2 id=">개선된 식별자 검색</h2>

<ul>
<li><p>마지막 <strong>중첩 함수</strong>의 <strong>지역 변수</strong>를 통해, <strong>식별자 검색</strong>을 개선시켰다.</p>

<ul>
<li><p>생성된 모든 <strong>전역 변수</strong>를 해당 <strong>지역 변수</strong>에 할당하여, <strong>식별자 검색</strong>에 걸리는 시간을 <strong>최소화</strong>한다.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="c1">// 마지막 중첩 함수일 경우</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">===</span> <span class="p">(</span><span class="nx">fnDepthCount</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>

      <span class="c1">// 식별자 검색 시작 시간</span>
      <span class="nx">fns</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;var start = new Date().getTime();&#39;</span><span class="p">);</span>

      <span class="cm">/******************************************************************/</span>
      <span class="cm">/******************************************************************/</span>
      <span class="c1">// 생성된 모든 전역 변수를 해당 function execution context 내부 AO 에 할당한다.</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">jj</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">jj</span> <span class="o">&lt;</span> <span class="nx">globalVariableCount</span><span class="p">;</span> <span class="nx">jj</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// 지역 변수에 값을 할당한다.</span>
          <span class="nx">fns</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;var y_&#39;</span> <span class="o">+</span> <span class="nx">jj</span> <span class="o">+</span> <span class="s1">&#39; = x_&#39;</span> <span class="o">+</span> <span class="nx">jj</span> <span class="o">+</span> <span class="s1">&#39;;&#39;</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="cm">/******************************************************************/</span>
      <span class="cm">/******************************************************************/</span>

      <span class="c1">// 마지막 중첩 함수 내부에서, 생성된 n 개의 지역 변수를 n 번 순회하며, 식별자 검색을 통해 값을 가져온다.</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">ii</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">ii</span> <span class="o">&lt;</span> <span class="nx">globalVariableLoopCount</span><span class="p">;</span> <span class="nx">ii</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

          <span class="cm">/******************************************************************/</span>
          <span class="cm">/******************************************************************/</span>
          <span class="c1">// 생성된 모든 지역 변수를 순회한다.</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">jjj</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">jjj</span> <span class="o">&lt;</span> <span class="nx">globalVariableCount</span><span class="p">;</span> <span class="nx">jjj</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
              <span class="c1">// 식별자 검색을 통해, 값을 가져온다.</span>
              <span class="nx">fns</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;y_&#39;</span> <span class="o">+</span> <span class="nx">jjj</span> <span class="o">+</span> <span class="s1">&#39;;&#39;</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="cm">/******************************************************************/</span>
          <span class="cm">/******************************************************************/</span>
      <span class="p">}</span>

      <span class="c1">// 식별자 검색 종료 시간</span>
      <span class="nx">fns</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;var end = new Date().getTime();&#39;</span><span class="p">);</span>
      <span class="nx">fns</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;document.getElementById(\&#39;searchTime\&#39;).value = (end - start) + \&#39; ms\&#39;;&#39;</span><span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">fns</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;} A_&#39;</span> <span class="o">+</span> <span class="nx">j</span> <span class="o">+</span> <span class="s1">&#39;();&#39;</span><span class="p">);</span>
      <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></li>
</ul></li>
</ul>

<h2 id=">테스트 결과</h2>

<ul>
<li><p>이 결과는 <strong>테스트 환경</strong>에 따라, <span style="color:#c11f1f">오차 범위</span>를 보일 수 있다.</p></li>
<li><p>읽기에 비해, 쓰는 시간이 더 오래 걸린다.(당연하지만)  </p>

<ul>
<li>IE: <span style="color:#c11f1f">차후 테스트 진행...</span><p></li>
<li>Chrome: 

<ul>
<li>읽기: <span style="color:#c11f1f">7 ~ 12</span>ms(개선 전) / <span style="color:#c11f1f">0 ~ 1</span>ms(개선 후)<p /></li>
<li>쓰기: <span style="color:#c11f1f">9 ~ 14</span>ms(개선 전) / <span style="color:#c11f1f">0 ~ 1</span>ms(개선 후)<p /></li>
</ul></li>
<li>Safari:

<ul>
<li>읽기: <span style="color:#c11f1f">5 ~ 7</span>ms(개선 전) / <span style="color:#c11f1f">0 ~ 1</span>ms(개선 후)<p /></li>
<li>쓰기: <span style="color:#c11f1f">9 ~ 12</span>ms(개선 전) / <span style="color:#c11f1f">0 ~ 1</span>ms(개선 후)<p /><br></li>
</ul></li>
<li>FF: 

<ul>
<li>읽기: <span style="color:#c11f1f">0 ~ 2</span>ms(개선 전) / <span style="color:#c11f1f">0 ~ 1</span>ms(개선 후)<p /></li>
<li>쓰기: <span style="color:#c11f1f">5 ~ 6</span>ms(개선 전) / <span style="color:#c11f1f">0 ~ 1</span>ms(개선 후)<p /><br></li>
</ul></li>
</ul></li>
</ul>

<h2 id=">마치며</h2>

<ul>
<li><p>이 코드는 <strong>ms 단위</strong>의 <strong>정확한 테스트</strong>를 위해 사용하기에는 무리가 따르며, 환경(브라우저)별, <strong>엔진 최적화</strong> 범위를 알 수 있는 정도로 사용하는것이 좋다.</p></li>
<li><p>결과를 통해, 알 수 있듯이, <strong>최적화</strong>된 <strong>엔진</strong>을 보유한 대부분의 모던 브라우저에서는 <strong>식별자 검색</strong>에 대한 <span style="color:#c11f1f">성능 차이</span>가 크게 존재하지 않았다.</p></li>
<li><p>즉 <strong>App</strong> 이 오래된 브라우저를 지원하지 않아도 되는 경우에는, <strong>식별자 검색</strong>에 대한 성능 만큼은, 큰 <strong>이슈</strong>가 되지 않을 듯 하다.</p></li>
</ul>

<h2 id="url">참고 URL</h2>

<ul>
<li><a href="http://mohwa.github.io/blog/javascript/2015/10/11/scope-chain-inJS/">Scope Chain 그리고 Closure</a></li>
</ul>

  </div>
  <div data-count="10" id="recommend-article"></div>
</article>

<section class="post-footer">
  <div class="related-posts">
    <div class="related-posts-title"><h2>Related Posts</h2></div>
    <div class="related-posts-list">
      <ul>
        
          <!-- match 를 false 로 초기화한다 -->
          <!---->
          
          <!-- 현재 page.categories === category 와 동일하다면. -->
          
          
          <!---->
        
          <!-- match 를 false 로 초기화한다 -->
          <!---->
          
          <!-- 현재 page.categories === category 와 동일하다면. -->
          
          
          <!---->
        
          <!-- match 를 false 로 초기화한다 -->
          <!---->
          
          <!-- 현재 page.categories === category 와 동일하다면. -->
          
          
          <!---->
        
          <!-- match 를 false 로 초기화한다 -->
          <!---->
          
          <!-- 현재 page.categories === category 와 동일하다면. -->
          
          
          <!---->
        
          <!-- match 를 false 로 초기화한다 -->
          <!---->
          
          <!-- 현재 page.categories === category 와 동일하다면. -->
          
          
          <!---->
        
          <!-- match 를 false 로 초기화한다 -->
          <!---->
          
          <!-- 현재 page.categories === category 와 동일하다면. -->
          
          
          <!---->
        
          <!-- match 를 false 로 초기화한다 -->
          <!---->
          
          <!-- 현재 page.categories === category 와 동일하다면. -->
          
          
          <!---->
        
      </ul>
    </div>
  </div>
</section>

<section class="comments">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'mohwa'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</section>



      <div class="separator"></div>
    </div>
  </div>
  <footer>
    <section>
  <ul class="links">
      <li><a href="https://twitter.com/yanione" title="follow me" target="_blank"><i class="icon-twitter"></i></a></li>
      <li><a href="https://github.com/mohwa" title="github page" target="_blank"><i class="icon-github"></i></a></li>
  </ul>
<section>

  </footer>
  <script>
    <!-- Google Analytics -->
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-30470280-2', 'auto');
    ga('send', 'pageview');

    // include jekyll full text search
    // https://github.com/christian-fei/Simple-Jekyll-Search
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('results-container'),
      json: '/blog/search.json',
      searchResultTemplate: '<li><a href="{href}">{title}</a>&nbsp;&nbsp;&nbsp;{date}</li>',
      noResultsText: 'No results found'
    });

  </script>
  <script src="http://b.readtrend.com/j/s.js"></script>
</body>
</html>
