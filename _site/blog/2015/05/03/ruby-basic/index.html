<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <meta name="keywords" content="blog">
    <meta name="description" content="코세라 웹 앱 아키텍처 중 루비 언어에 대한 기초 부분" />


    <link rel="stylesheet" href="/assets/css/site.css" />
    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />

    <script src="/assets/js/jquery.min.js"></script>
    <script defer src="/assets/js/lunr.min.js" type="text/javascript" charset="utf-8"></script>
    <!-- Script pointing to jekyll-search.js -->
    <script src="/bower_components/simple-jekyll-search/dest/jekyll-search.js" type="text/javascript"></script>
    <!--<script defer src="/assets/js/jquery.lunr.search.js" type="text/javascript" charset="utf-8"></script>-->

    <title>루비 언어 기초</title>
</head>
<body>

  <div class="top-bar"></div>

  <div class="container">
    <div class="site">
      <header>
        <nav>
    <span style="float:left;">
        <a class="" href="/">Home</a>
        <!--<a class="" href="/archive/">전체글</a>-->
        <!--<a class="" href="//github.com/nolboo/nolboo.github.io/wiki">번역글 위키</a>-->
    </span>
    <span style="float:right;">
        <div id="search-container" class="search-container">
            <input type="text" id="search-input" class="search-input" placeholder="search...">
        </div>
    </span>
</nav>
        <div class="pull-right right logo">
          <div class="name"></div>
          <!--<a href="/feed.xml"><img class="avatar" src="/images/rss.jpg" alt="RSS" /></a>-->
        </div>
      </header>
      <div class="separator"></div>
      <ul id="results-container" class="results-container"></ul>
      <article>
  <h1>
    루비 언어 기초
  </h1>
  <div class="center">
    <p class="meta">03 May 2015</p>
  </div>



  <div class="post">
  <p>뉴멕시코 대학의 Greg Heileman 교수의 코세라 강좌 <a href="https://class.coursera.org/webapplications-003">Web Application Architectures</a> 중에서 루비 언어 기초만 별도로 정리하였다. 나머지는 <a href="http://nolboo.github.io/blog/2015/05/05/web-application-architecture/">루비 온 레일즈로 블로그 만들기</a>에서 볼 수 있다.</p>

<h2>Ruby Programming Language</h2>

<p>Yukihiro Matsumoto(“Matz”)는 90년 중반에 루비를 만들었다. &quot;펄보다 강력하고 파이썬 보다 객체지향적인 스크립트 언어를 만들길 원했다.&quot; 루비는 기계보단 프로그래머에 초점을 맞쳤고, 설계 목표도 프로그래머의 효율(즉, 생산성)을 최대화하기 위한 것이었다. &quot;루비가 세상의 모든 프로그래머가 생산적이고, 프로그래밍을 즐기고, 행복해지는 것을 돕길 원했다. 그게 루비 언어의 주요 목적이다.&quot;</p>

<p>Matz’s guiding philosophy for Ruby:<br>
“Ruby is designed to make programmers happy.”</p>

<ul>
<li><a href="http://web.archive.org/web/20130729205129id_/http://itc.conversationsnetwork.org/shows/detail1638.html">Yukihiro &quot;Matz&quot; Matsumoto | Ruby Design Principles</a></li>
<li><a href="http://we.weirdmeetup.com/ruby%EC%9D%98-%EC%B2%A0%ED%95%99%EC%97%90-%EA%B4%80%ED%95%9C-%EB%A7%88%EC%B8%A0%EB%AA%A8%ED%86%A0-%EC%9C%A0%ED%82%A4%ED%9E%88%EB%A1%9C%EC%9D%98-%EC%9D%B8%ED%84%B0%EB%B7%B0-part-1/">Ruby의 철학에 관한 마츠모토 유키히로의 인터뷰</a></li>
</ul>

<pre class="terminal">
ruby --version
gem list
gem install rails

ruby -e ’puts "Hello World!"’
Hello World!
</pre>

<ul>
<li><code>-e</code> 프롬프트로 인터프리터가 <code>&#39;&#39;</code>안의 루비 코드를 실행한다.</li>
<li><code>&#39;&#39;</code>안의 루비 코드를 hello.rb 파일 안에 넣고 실행하면 같은 결과가 나온다.</li>
</ul>

<pre class="terminal">
ruby hello.rb
Hello World!
</pre>

<h3>Interactive Ruby Shell(IRB)</h3>

<pre class="terminal">
irb
2.0.0p195 :001 >
</pre>

<ul>
<li>루비 앱 디렉토리의 루트에서 다음 명령으로 IRB를 실행하여, 콘솔 커맨트 라인에서 루비 앱을 직접 조작할 수 있다.</li>
</ul>

<pre class="terminal">
rails console
Loading development environment (Rails 4.0.0.rc1)
2.0.0-p195 :001 >
</pre>

<p>Ruby is a multi-paradigm programming language:</p>

<ul>
<li>Scripting – It can be used to write scripts that automate the execution
of tasks within some environment.</li>
<li>Imperative (procedure-oriented) programming – It has the traditional control structures found in imperative programs. You can create functions with variables (that store state); however, defining functions/variables outside classes actually makes them methods of the root Object class.</li>
<li>Object-oriented programming – Everything is an object, derived from
the Object class.</li>
<li>Functional programming – Computation proceeds via the evaluation of
functions that depend only on their input, not the program state.</li>
</ul>

<h3>Classes and Inheritance</h3>

<h4>Classes</h4>

<ul>
<li>클래스는 <code>class</code> 키워드와 이름으로 정의된다. 이름은 대문자로 시작하고, 캐멀케이스(CamelCase)를 사용한다.</li>
<li><code>def</code> 키워드로 매서드를 정의한다. 매서드 이름은 대문자 없이 단어를 <code>_</code>로 연결한다.</li>
<li>클래스와 매서드는 <code>end</code> 키워드로 끝낸다.<br></li>
</ul>

<p>Ex. </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">MyClass</span>
    <span class="vi">@boo</span>            <span class="c1"># an instance variable</span>
    <span class="k">def</span> <span class="nf">my_method</span> 
        <span class="vi">@foo</span> <span class="o">=</span> <span class="mi">2</span>    <span class="c1"># an instance variable</span>
    <span class="k">end</span>
<span class="k">end</span> 

<span class="k">in</span> <span class="ss">IRB</span><span class="p">:</span>

<span class="o">&gt;</span> <span class="n">mc</span> <span class="o">=</span> <span class="no">MyClass</span><span class="o">.</span><span class="n">new</span>  <span class="c1"># create a MyClass object </span>
<span class="o">&gt;</span> <span class="n">mc</span><span class="o">.</span><span class="n">my_method</span>      <span class="c1"># =&gt; 2 </span>
<span class="o">&gt;</span> <span class="n">mc</span><span class="o">.</span><span class="n">boo</span>            <span class="c1"># =&gt; error </span>
</code></pre></div>
<h4>Methods</h4>

<ul>
<li>인스턴스 변수는 매서드 정의 안에서만 접근하거나 변경할 수 있다. 아래에서는 setter 매서드로 값을 지정한 후 getter 매서드로 값을 얻을 수 있다.<br></li>
</ul>

<p>Ex. </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">MyClass</span> 
    <span class="k">def</span> <span class="nf">boo</span>     <span class="c1"># a getter method </span>
        <span class="k">return</span> <span class="vi">@boo</span> 
    <span class="k">end</span> 
    <span class="k">def</span> <span class="nf">boo</span><span class="o">=</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>   <span class="c1"># setter method </span>
        <span class="vi">@boo</span> <span class="o">=</span> <span class="n">val</span> 
    <span class="k">end</span> 
<span class="k">end</span> 

<span class="o">&gt;</span> <span class="n">mc</span> <span class="o">=</span> <span class="no">MyClass</span><span class="o">.</span><span class="n">new</span>  <span class="c1"># create a MyClass object </span>
<span class="o">&gt;</span> <span class="n">boo</span> <span class="o">=</span> <span class="mi">1</span>   <span class="c1"># =&gt; 1 </span>
<span class="o">&gt;</span> <span class="n">boo</span>       <span class="c1"># =&gt; 1</span>
</code></pre></div>
<p>루비 매서드는 implicit 리턴 값을 갖는다 - 매서드 안에서 마지막 표현식의 값이 리턴값이다. <code>return</code> 선언이 있지만 사용할 필요는 없다.</p>

<p>Ex. 두 개의 수를 비교하여 작은 것을 리턴해주는 min 매서드.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> 
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="k">then</span> <span class="n">x</span> <span class="k">else</span> <span class="n">y</span> <span class="k">end</span> 
<span class="k">end</span>
</code></pre></div>
<p>매서드를 호출할 때 괄호는 선택사항이다.</p>

<h5>클래스 매서드</h5>

<p>클래스 매서드는 <code>self</code> 키워드를 앞에 놓으며, 나머지는 일반 매서드와 같다.</p>

<p>Ex. </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">MyClass</span> 
    <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">cls_method</span> 
        <span class="s2">&quot;MyClass type&quot;</span> 
    <span class="k">end</span> 
<span class="k">end</span> 

<span class="o">&gt;</span> <span class="no">MyClass</span><span class="o">.</span><span class="n">cls_method</span> <span class="c1"># =&gt; &quot;MyClass type&quot;</span>
</code></pre></div>
<p><code>Array.methods</code> 명령으로 Array 클래스의 모든 매서드를 볼 수 있다.</p>

<p>매서드 이름의 마지막 문자가 매서드의 행동을 가리쳐주기도 한다. 물음표<code>?</code>로 끝나는 매서드는 리턴값이 불린값이다. 감탄사<code>!</code>로 끝나는 매서드는 객체의 상태를 변경할 수 있으며, 객체의 본사본을 변경할 수 있는 비감탄사 버전의 매서드도 제공된다. <code>self</code> 키워드는 현재 객체를 참조하도록 객체 안에서 사용할 수 있다. </p>

<h4>Inheritance, Mixins and Extending Classes</h4>

<p>루비에선 하나의 상속만 지원된다. 멀티 상속을 위해서는 <code>mixin</code>이 기본적으로 제공된다. 클래스는 절대 닫히지 않아서 기존 클래스에 매서드를 추가할 수 있다.(작성한 클래스에도 표준 내장 클래스같이 적용된다) </p>

<p>Ex. </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Fixnum</span> 
    <span class="k">def</span> <span class="nf">previous</span> 
        <span class="k">return</span> <span class="nb">self</span><span class="o">-</span><span class="mi">1</span> 
    <span class="k">end</span> 
<span class="k">end</span>
</code></pre></div>
<h4>Specifying Access</h4>

<p>클래스를 정의할 때 <code>public</code>, <code>private</code>, <code>protected</code> 키워드로 접근 레벨을 특정할 수 있다. C++ 이나 Java와는 약간 다르다.</p>

<p>– public : 누구나 호출할 수 있다. (C++ 이나 자바와 같다)<br>
– protected : 정의된 클래스와 그 서브클래스의 객체에 의해서만 호출할 수 있다.<br>
– private : 현재 객체의 컨택스트 안에서만 호출할 수 있다. 같은 클래스의 두 개의 객체는 서로의 private 매서드를 호출활 수 없다. private 매서드를 받는 것은 항상 <code>self</code>이다.</p>

<p>기본적으로 클래스의 모든 매서드는 <code>public</code>이며, 모든 인스턴스 변수는 <code>protected</code>이다.</p>

<p>객체의 속성에 접근하는 방법 중 getter, setter를 이용하는 방법이 있지만, 이건 고통이다. <code>attr_accessor</code>를 이용한 빠른 방법이 있다.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">MyClass</span>
    <span class="kp">attr_accessor</span> <span class="ss">:boo</span>
<span class="k">end</span>
</code></pre></div>
<p>boo라고 불리는 인스턴스 변수를 만들고, getter, setter 매서드를 만든다.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Person</span>
    <span class="kp">attr_accessor</span> <span class="ss">:first_name</span><span class="p">,</span> <span class="ss">:last_name</span>
<span class="k">end</span>
</code></pre></div>
<p>first_name, last_name 인스턴스 변수를 만들고, 각각의 getter, setter 매서드를 만든다.</p>

<p>getter 매서드만을 원하면 <code>attr_reader</code>를 사용하고, setter 매서드만을 원하면 <code>attr_writer</code>를 사용한다.</p>

<p>상속의 문법은 다음과 같다:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">NewClass</span> <span class="o">&lt;</span> <span class="no">SuperClass</span> 
    <span class="o">.</span><span class="n">.</span><span class="o">.</span> 
<span class="k">end</span>
</code></pre></div>
<p><code>initialize</code> 매서드는 <code>a = Array.new</code>와 같이 클래스 이름과 <code>new</code>를 호출하여 사용한다. 항상 private이다.</p>

<p><code>module</code> 키워드를 사용하여 여러 클래스를 포함하는 네임스페이스를 만들 수 있다. <code>require</code> 키워드를 사용하여 다른 프로그램 안에 모듈을 포함할 수 있다. 예) require ’module_name’</p>

<p>클래스에서 <code>include</code> 키워드를 사용해서 모듈을 mixin할 수 있다. mixin한 모듈 안에 있는 모든 매서드를 클래스의 한 부분으로 만들 수 있다.</p>

<h3>Objects</h3>

<p>루비에선 모든 것이 객체이다. <code>Object</code> 클래스는 모든 클래스의 부모 클래스이다. 모든 객체에서 &#39;Object&#39;의 매서드를 사용할 수 있다.</p>

<p><code>Object</code> 클래스의 중요한 매서드는 <code>class()</code>이다. 객체의 &quot;type&quot;을 리턴한다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; 1.class()     # =&gt; Fixnum 
&gt; 1.class       # =&gt; Fixnum 
&gt; 1.0.class     # =&gt; Float 
&gt; &quot;Foo&quot;.class   # =&gt; String 
</code></pre></div>
<p>괄호는 선택사항이며 일반적으로 생략된다.</p>

<p>루비 문법은 대소문자를 구별한다. 대부분의 경우 대문자로 시작한 변수는 상수다.</p>

<h3>Variables</h3>

<p>루비는 변수 선언을 사용하지 않는다. 적절한 변수명에 값을 주면 변수가 만들어진다.(duck-typing)</p>

<p>Ex.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; a = 2 # =&gt; 2 
&gt; a     # =&gt; 2
</code></pre></div>
<p><code>a.class</code>로 type을 보면 Fixnum 즉, 루비의 정수 데이타이다. 나머지 하나의 정수 타입은 Bignum(임의 크기의 수)이다.</p>

<p>Ex. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; a = &quot;2&quot; # =&gt; &quot;2&quot; 
&gt; a # =&gt; &quot;2&quot;
</code></pre></div>
<p>이제 a는 문자열(String) 변수이다.</p>

<p><strong>중요</strong>: 루비에서 모든 할당은 참조로 이루어진다.(C나 C++에서는 기본적으로 할당은 값으로 이루어진다.) 즉, 변수는 객체의 참조를 갖고 있을 뿐이고, 객체의 타입은 상관하지 않는다. </p>

<p>루비는 병렬 할당을 지원한다.</p>

<p>Ex. 두 변수의 값을 쉽게 스왑할 수 있다: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; a = 2     # =&gt; 2 
&gt; b = 1     # =&gt; 1 
&gt; puts a, b # 2 
            # 1 
            # =&gt; nil 
&gt; a, b = b, a # =&gt; [1, 2]
</code></pre></div>
<p>루비는 변수의 스코프와 타입를 나타내기 위한 간단한 네이밍 규약을 사용한다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">- name      : 지역 변수
- @name     : 인스턴스 변수
- @@name    : 클래스 변수
- $Name     : 전역 변수(대문자로 시작)
</code></pre></div>
<p>@과 $ 도장(sigil)은 프로그래머가 각 변수의 역할을 쉽게 지정할 수 있어 읽기 쉽게 한다.</p>

<p>지역 변수는 소문자로 시작하며, 여러 단어는 밑줄로 연결한다. <br>
상수는 대문자로 시작하며 밑줄을 사용한다. <br>
클래스와 모듈은 상수로 취급되어 대문자로 시작하고 CamelCase를 사용한다.</p>

<h3>String</h3>

<p>큰따옴표<code>&quot;&quot;</code>나 작은따옴표<code>&#39;&#39;</code>를 사용하여 문자열을 만들 수 있다. 큰따옴표로 좀 더 많은 것을 할 수 있다. 큰따옴표로 문자열을 만들 때 <code>#{루비 코드}</code>을 삽입하여 실행시킨 문자열을 만들 수 있다.<br>
Ex.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; &quot;360 degrees=#{2*Math::PI} radians&quot; 
=&gt; &quot;360 degrees=6.283185307179586 radians&quot; 
</code></pre></div>
<p>백틱````으로 문자열을 감싸면 백그라운드 OS(OS X 등)에서 명령어를 실행한다.<br>
Ex. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; `date` 
=&gt; &quot;Tue Oct 15 09:10:21 MDT 2013n&quot; 
</code></pre></div>
<p>루비 문자열은 가변적이다. 루비가 새문자열을 다룰 때마다 새로운 <code>String</code> 객체를 만든다. 즉, 루프에서 문자열을 만들면, 각 반복문에서 새로운 <code>String</code> 객체가 만들어진다. 주의해야한다.</p>

<p><code>String</code> 클래스는 문자열을 다룰 수 있는 많은 매서드를 가지고 있다.<br>
Ex. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; name = &quot;Homer Blimpson&quot; # =&gt; &quot;Homer Blimpson&quot; 
&gt; name.length # =&gt; 14 
&gt; name[6] # =&gt; &quot;B&quot; 
&gt; name[6..14] # =&gt; &quot;Blimpson&quot; 
&gt; &quot;Bart &quot; + name[6..14] # =&gt; &quot;Bart Blimpson&quot; 
&gt; name.encoding # =&gt; #&lt;Encoding:UTF-8&gt;
</code></pre></div>
<h3>Regular Expression Class</h3>

<p>루비는 문자열과 밀접한 <code>Regexp</code>라는 정규식 클래스를 가지고 있다. 정규식은 텍스트의 문자열 매칭(특정 문자, 단어, 문자 패턴)을 위한 간결하면서 유연한 방법을 제공한다.</p>

<p>루비의 정규식은 <code>/pattern/modifiers</code>의 형식으로 쓴다. “pattern”은 정규식 자체이며, “modiﬁers”는 다양한 옵션 문자들이며, 선택적이다. Perl에서 빌려온 문법이다. 특정 정규식을 테스트하려면 <code>=~</code> 연산자를 사용하며, 매칭되는 문자열의 첫 문자의 위치를 리턴하거나 매칭되는 것이 없으면 <code>nil</code>을 리턴한다.<br>
Ex. &quot;Homer&quot; =~ /er/ # =&gt; 3</p>

<p>패턴에 대한 갖는 의미를 몇 가지만 살펴보면:</p>

<p>| 기 호       | 의 미                      |<br>
|------------|---------------------------|<br>
| [ ]        | 범위 지정 예: [a-z]는 a부터 z사이의 모든 문자|<br>
| \w         | word 문자, [0-9A-Za-z]와 동일|<br>
| \W         | \w와 반대                   |<br>
| \s         | 공백 문자, [\t\n\r\f]와 동일  |<br>
| \S         | \s와 반대                   |<br>
| \d         | digit 문자, [0-9]와 동일     |<br>
| \D         | /d와 반대                   |<br>
| \b         | 백스페이스(범위 지정에서 사용될 때)|<br>
| \b         | 단어 경계(boundary)(범위 지정에서 사용되지 않을 때)|<br>
| \B         | \b와 반대로 일치              |<br>
| *          | 문자가 없는 경우나 하나 이상 연속하는 문자 찾기|<br>
| +          | 하나 이상 연속하는 문자 찾기     |<br>
| {m, n}     | at least m and at most n  |<br>
| ?          | at most 1, {0,1}과 동일     |<br>
| |(버티컬 바) | 왼쪽 혹은 오른쪽과 일치         |<br>
| ( )        | 그룹핑                      |</p>

<p>정규식은 문자열을 처리할 때 종종 사용된다. 다음 루비 정규식은 전화번호에서 숫자가 아닌 모든 문자를 &quot;&quot;로 바꾼다. 즉, 전화번호에서 숫자를 제외한 모든 문자를 제거한다:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phone = phone.gsub!(/D/, &quot;&quot;) 
</code></pre></div>
<p>정규식은 일반적으로 이메일, 전화번호 같은 사용자 입력을 검증하기 위해 사용한다.<br>
Ex. 다음 정규식은 이메일 주소를 검증하기 위해 사용할 수 있다: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">/A[w._%–]+@[w.-]+.[a-zA-Z]{2,4}z/ 
</code></pre></div>
<h3>Symbols</h3>

<p>루비 symbol도 문자열과 밀접하며, 루비에서 문자열은 가변적이고, 루비 symbol은 비가변적인 것을 기억하라.<br>
루비 인터프리터는 심볼 테이블에 모든 클래스, 매서드, 변수를 저장한다. 이 테이블에 자신만의 심볼을 추가할 수 있다. 특별히 심볼은 이름 앞에 콜론<code>:</code>을 붙여 만든다.<br>
    Ex. attr_reader :row, :col </p>

<p>루비 심볼은 이름과 문자열을 대표하곤 한다; 그러나 <code>String</code> 객체와는 다르게 같은 이름의 심볼은 하나의 루비 세션 동안 단 한번만 초기화되며 메모리에 존재한다. 루비 심볼은 비가변적이며, 런타임 동안 변경할 수 없다.<br>
    Ex. :name = &quot;Homer&quot; # =&gt; will yield an error</p>

<p>심볼은 메모리에 단 한번만 저장되어 메모리 공간 활용에 유리하다. 같은 이름을 가진 여러 개의 문자열이 메모리에 존재할 수 있다.<br>
Ex. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; puts :name.object_id # =&gt; yields 20488 
&gt; puts :name.object_id # =&gt; yields 20488 
&gt; puts &quot;name&quot;.object_id # =&gt; yields 2168472820 
&gt; puts &quot;name&quot;.object_id # =&gt; yields 2168484060 
</code></pre></div>
<p>언제 문자열을 사용하고 언제 심볼을 사용하는가? 주먹구구 지침:<br>
    - 만약 객체의 컨텐츠(즉, 일련의 문자들)가 중요하면 이 문자들을 다루려면 문자열을 사용하라.<br>
    - 객체의 아이덴티티가 중요하면(이 경우에는 아마 문자들을 다루고 싶지 않을듯), 심볼을 사용하라.</p>

<h3>Expressions</h3>

<p>루비 문법은 표현식 지향적이다. 루비의 모든 것은 하나의 표현식으로 다루어지므로 무언가를 계산한다.</p>

<p>Ex. 조건적인 실행이나 루핑 구조가 다른 언어에서는 명령문으로 취급되지만 루비에서는 표현식으로 취급된다.</p>

<p>루비에서 <code>if</code>, <code>case</code>, <code>for</code> 구조는 계산된 마지막 표현식의 값을 리턴한다.</p>

<h3>Control Structures – Conditional Execution</h3>

<p>루비는 조건을 표현하기 위한 풍부한 문법을 가지고 있다. 가장 기본적인 것은:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">if</span> <span class="n">expression</span>
    <span class="n">code</span>
<span class="k">end</span> 
</code></pre></div>
<p>조건식이 <code>false</code> 나 <code>nil</code>이 아닌 값이면 code가 실행된다.</p>

<p>else 절은 if 조건식이 참이 아닐 경우 실행되어야 하는 코드를 추가할 수 있다:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">if</span> <span class="n">expression1</span>
    <span class="n">code</span>
<span class="k">elsif</span> <span class="n">expression2</span>
    <span class="n">code</span>
<span class="k">else</span> 
    <span class="n">code</span>
<span class="k">end</span>
</code></pre></div>
<ul>
<li>elsif는 오타가 아니다.</li>
</ul>

<p>There’s a shorthand way of expressing the if conditional that treats it as an expression modiﬁer: </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">code</span> <span class="k">if</span> <span class="n">expression</span>
</code></pre></div>
<p>루비는 C/C++ 처럼 <code>?:</code> 연산자도 있다.</p>

<p>비교 연산자: </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">==</span><span class="p">,</span> <span class="o">!=</span><span class="p">,</span> <span class="o">=</span><span class="err">∼</span><span class="p">,</span> <span class="o">!</span><span class="err">∼</span><span class="p">,</span> <span class="o">===</span> 
</code></pre></div>
<p>There is a case structure in Ruby, === is the case-equality operator.</p>

<p>표준적인 조건식에 더하여, 루비는 코드의 가독성과 이해를 증가하기 위해 몇 가지를 추가한다.<br>
예로, 다음은 if 문의 반대이다:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">until</span> <span class="n">expression</span>
    <span class="n">code</span>
<span class="k">end</span>
</code></pre></div>
<p>조건식이 <code>false</code> 나 <code>nil</code>아닐 때까지 code가 수행된다.</p>

<p>until 조건식에 else 절을 붙일 수 없다.</p>

<h3>Control Structures – Iteration</h3>

<p><code>for</code>/<code>in</code> 루프는 가산 누적되면서 반복한다: </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">for</span> <span class="n">var</span> <span class="k">in</span> <span class="n">collection</span> <span class="k">do</span> 
    <span class="n">body</span>
<span class="k">end</span> 
</code></pre></div>
<p>Exit condition loop: </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">while</span> <span class="n">condition</span> <span class="k">do</span> 
    <span class="n">body</span>
<span class="k">end</span> 
</code></pre></div>
<p>Exit condition loop, while과 반대: </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">until</span> <span class="n">condition</span> <span class="k">do</span> 
    <span class="n">body</span>
<span class="k">end</span> 
</code></pre></div>
<p>In Ruby, it’s more common to use iterators (next lecture).</p>

<h3>Collections</h3>

<p>루비에는 많은 컬렉션 클래스가 있어 데이타의 컬렉션을 하나의 편리한 곳에 저장하고 참조할 수 있다. </p>

<p>제일 중요한 컨렉션 클래스는 배열<code>Array</code>과 해시<code>Hash</code>이다. <code>Set</code> 클래스가 최근에 추가되었다. </p>

<p>각각의 컬렉션 클래스는 <code>Enumerable</code> 모듈을 믹신으로 포함하며, <code>Enumerable</code>에 있는 모든 매서드들을 공유한다.</p>

<p><code>Enumerable</code> 모듈은 <code>iterator</code> 매서드를 제공하는데 한 컬렉션의 모든 요소들에 걸쳐 반복 실행할 수 있다.</p>

<p>배열은 레일즈 컨트롤러에서 널리 사용된다:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">index</span> 
    <span class="vi">@posts</span> <span class="o">=</span> <span class="no">Post</span><span class="o">.</span><span class="n">all</span> 
<span class="k">end</span>
</code></pre></div>
<p><code>/app/controllers/post_controller.rb</code>의 도입 부분에 있는 위의 index 매서드에서 인스턴트 변수인 <code>@post</code>는 배열이다.</p>

<h3>Array</h3>

<p>배열은 0에서 시작하는 정수로 인덱스할 수 있는(zero-based addressing) 객체 참조의 컬렉션을 담고있다.<br>
Ex. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; a = [33.3, &quot;hi&quot;, 2] 
&gt; a[0]          # =&gt; 33.3 
</code></pre></div>
<p>Array 클래스에는 아주 많은 매서드가 있다. 예를 들면, 배열의 시작부터 증가되는 수, 끝에서 감소되는 수, 범위 <code>a[1..2]</code>, <code>sort</code>, <code>include?</code>, <code>reverse</code>, <code>length</code>, <code>first</code>, <code>last</code>, <code>&lt;&lt;</code>, <code>push</code>, <code>pop</code>, 등. <br>
Ex. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; a[1..2]       # =&gt; [&quot;hi&quot;, 2] 
&gt; a &lt;&lt; 5        # =&gt; [33.3, &quot;hi&quot;, 2, 5] 
&gt; a[-1]         # =&gt; 5 
&gt; a.include? 2  #=&gt; true
</code></pre></div>
<h4>Hashes</h4>

<p>해시는 결합(associative) 배열이며, 키와 값이 <code>=&gt;</code> 심볼로 분리된 객체이다. 키를 사용하여 값을 인덱스한다. 배열에서 키는 정수이고, 해시의 키는 객체이다. 배열은 <code>[]</code>을 사용하지만 해시는 <code>{}</code>를 사용한다.<br>
Ex. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phone = {’home’=&gt; 1, ’mobile’=&gt; 2, ’work’=&gt; 3}
</code></pre></div>
<p>혹은 심볼을 사용하여 더 낫게: </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">phone = {:home =&gt; 1, :mobile =&gt; 2, :work =&gt; 3} 
&gt; phone[:home]      # =&gt; 1 
&gt; phone.key(1)      # =&gt; :home 
&gt; phone.key?(:home) #=&gt; true 
&gt; phone.value?(1)   #=&gt; true
</code></pre></div>
<h4>Nested Collections</h4>

<p>다차원의 컬렉션을 만들려면 컬렉션들을 들여쓰기한다.<br>
Ex. </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&gt; ary = [[&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;], [1,2,3], [&quot;Alpha&quot;, &quot;Beta&quot;, &quot;Gamma&quot;]] 
&gt; ary[2][1]      # =&gt; &quot;Beta&quot; 
&gt; hsh = {&quot;Chicago&quot;=&gt;{&quot;nickname&quot;=&gt;&quot;The Windy City&quot;, &quot;state&quot;=&gt;&quot;IL&quot;}, &quot;New York City&quot;=&gt;{&quot;nickname&quot;=&gt;&quot; The Big Apple&quot;, &quot;state&quot;=&gt;&quot;NY&quot;}} 
&gt; hsh[&quot;Chicago&quot;][&quot;nickname&quot;] # =&gt; &quot;The Windy City&quot;
</code></pre></div>
<h3>Code Blocks</h3>

<p>블럭은 <code>{}</code>로 둘러싸인 여러 줄의 코드로 되어있으며, 매서드에 매개변수를 넘길 수 있다. </p>

<p>Using this feature it is easy to build code libraries which can delegate varying functionality to code blocks to be built later. </p>

<p><strong>Important</strong>: A block may appear only in the source if it is adjacent to a method call (on the same line as the method call’s last parameter). </p>

<p>A block is invoked using the <code>yield</code> statement. <br>
Ex. </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">three_times</span> 
    <span class="k">yield</span> 
    <span class="k">yield</span> 
    <span class="k">yield</span> 
<span class="k">end</span> 
</code></pre></div>
<ul>
<li><code>three_times {puts &quot;Hello&quot;}</code> 는 &quot;Hello&quot;를 세번 출력한다.</li>
</ul>

<h4>Iterators</h4>

<p>루비에서 다양한 루프 구조는 드물게 사용하며, 반복을 사용하는 것이 더 일반적인다. 반복 매서드를 정의하는 특징은 컬렉션의 각 요소에 블럭 코드를 적용하는 것이다. The deﬁning feature of an iterator method is that it invokes a block of code, applying it to each element in a collection. </p>

<p>A collection class that includes the Enumerable module is required to supply an each method. This method must yield the successive members of the collection.</p>

<p>Iterators work because you can pass parameters into blocks. </p>

<p>Ex. The each method in the Enumerable module works something like: </p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">each</span> 
    <span class="k">for</span> <span class="n">each</span> <span class="n">item</span> <span class="k">in</span> <span class="n">the</span> <span class="n">collection</span> <span class="c1"># this is psuedocode </span>
        <span class="k">yield</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> 
    <span class="k">end</span> 
<span class="k">end</span> 
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">&gt; a = [33.3, &quot;hi&quot;, 2] 
&gt; a.each {|element| puts element} 
33.3 
&quot;hi&quot; 
2 
=&gt; [33.3, &quot;hi&quot;, 2]
</code></pre></div>
<p>레일즈 뷰에서 사용한 반복문이다:</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;tbody&gt;</span> 
    <span class="err">&lt;</span>% @posts.each do |post| %&gt; 
        <span class="nt">&lt;tr&gt;</span> 
            <span class="nt">&lt;td&gt;</span><span class="err">&lt;</span>%= post.title %&gt;<span class="nt">&lt;/td&gt;</span> 
            <span class="nt">&lt;td&gt;</span><span class="err">&lt;</span>%= post.body %&gt;<span class="nt">&lt;/td&gt;</span> 
            <span class="nt">&lt;td&gt;</span><span class="err">&lt;</span>%= link_to ’Show’, post %&gt;<span class="nt">&lt;/td&gt;</span> 
            <span class="nt">&lt;td&gt;</span><span class="err">&lt;</span>%= link_to ’Edit’, edit_post_path(post) %&gt;<span class="nt">&lt;/td&gt;</span> 
            <span class="nt">&lt;td&gt;</span><span class="err">&lt;</span>%= link_to ’Destroy’, post, method: :delete , data: { confirm: ’Are you sure?’ } %&gt;<span class="nt">&lt;/td&gt;</span> 
        <span class="nt">&lt;/tr&gt;</span> 
    <span class="err">&lt;</span>% end %&gt; 
<span class="nt">&lt;/tbody&gt;</span>
</code></pre></div>
<p>/views/posts/index.html.erb 안에 있는 소스이다. <code>&lt;%</code>와 <code>%&gt;</code>로 둘러싸인 부분은 뷰에서 실행되는 루비 코드(embedded Ruby)이며, <code>&lt;%=</code>로 시작되는 것은 실행 결과를 HTML 코드로 삽입한다.</p>

<h2>참고링크</h2>

<ul>
<li><a href="https://opentutorials.org/module/1569">Python &amp; Ruby</a>: Ruby와 Python을 동시에 배우는 병렬학습</li>
</ul>

  </div>
  <ul class="tags post-tags cf">
    
    <li><a href="/search/?tags=Coursera">coursera</a></li>
    
    <li><a href="/search/?tags=ruby">ruby</a></li>
    
    <li><a href="/search/?tags=basic">basic</a></li>
    
  </ul>
</article>

<section class="post-footer">
  <!--<a href="/feed.xml" class="pull-right">-->
    <!--<img src="/images/rss.jpg" alt="RSS" />-->
  <!--</a>-->
</section>
<!-- tag, category search -->
<script defer src="/assets/js/alexpearce.js"></script>

<div class="separator"></div>

<section class="comments">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'mohwa'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</section>

      <div class="separator"></div>
    </div>
  </div>

  <!--<div class="clear"></div>-->

  <footer>
    <!--<p>-->
    <!--Powered by <a href="http://jekyllrb.com/">Jekyll</a>,-->
    <!--hosted on <a href="http://pages.github.com/">Github Pages</a>-->
    <!--| Template inspired by <a href="http://sebastien.saunier.me/">sebastien.saunier.me</a>-->
<!--</p>-->
<ul class="links">
    <li><a href="https://twitter.com/yanione" title="follow me" target="_blank"><i class="icon-twitter"></i></a></li>
    <li><a href="https://github.com/mohwa" title="github page" target="_blank"><i class="icon-github"></i></a></li>
</ul>
  </footer>
  <!-- Google Analytics -->
  <script>
//    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
//    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
//    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
//    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
//
//    ga('create', 'UA-42615434-1', 'nolboo.github.io');
//    ga('send', 'pageview');

    // include jekyll full text search
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('results-container'),
      json: '/search.json',
      searchResultTemplate: '<li><a href="{url}">{title}</a>&nbsp;&nbsp;&nbsp;{date}</li>'
    });
  </script>
</body>
</html>
